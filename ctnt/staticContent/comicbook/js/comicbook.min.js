this.Handlebars={},function(e){e.VERSION="1.0.rc.1",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t){e.log(t)})}(this.Handlebars);var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<errorProps.length;n++)this[errorProps[n]]=t[errorProps[n]]},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){var o={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e,{data:s!==undefined}),i[t](n,o)}},Handlebars.template=Handlebars.VM.template,function(){var e;e=function(){var e,t,n;return t=[],e=function(t,r){var i;return t?e.toType(t)==="function"?e(document).ready(t):(i=e.getDOMObject(t,r),n(i,t)):n()},n=function(e,r){return e=e||t,e.__proto__=n.prototype,e.selector=r||"",e},e.extend=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){var n,r;r=[];for(n in t)r.push(e[n]=t[n]);return r}),e},n.prototype=e.fn={},e}(),window.Quo=e,"$$"in window||(window.$$=e)}.call(this),function(){(function(e){var t,n,r,i,s,o,u,a,f,l,c;return t={TYPE:"GET",MIME:"json"},r={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},n=0,e.ajaxSettings={type:t.TYPE,async:!0,success:{},error:{},context:null,dataType:t.MIME,headers:{},xhr:function(){return new window.XMLHttpRequest},crossDomain:!1,timeout:0},e.ajax=function(n){var r,u,l,h;l=e.mix(e.ajaxSettings,n),l.type===t.TYPE?l.url+=e.serializeParameters(l.data,"?"):l.data=e.serializeParameters(l.data);if(i(l.url))return e.jsonp(l);h=l.xhr(),h.onreadystatechange=function(){if(h.readyState===4)return clearTimeout(r),f(h,l)},h.open(l.type,l.url,l.async),a(h,l),l.timeout>0&&(r=setTimeout(function(){return c(h,l)},l.timeout));try{h.send(l.data)}catch(p){u=p,h=u,o("Resource not found",h,l)}return l.async?h:s(h,l)},e.jsonp=function(t){var r,i,s,o;return t.async?(i="jsonp"+ ++n,s=document.createElement("script"),o={abort:function(){e(s).remove();if(i in window)return window[i]={}}},r=void 0,window[i]=function(n){return clearTimeout(r),e(s).remove(),delete window[i],l(n,o,t)},s.src=t.url.replace(RegExp("=\\?"),"="+i),e("head").append(s),t.timeout>0&&(r=setTimeout(function(){return c(o,t)},t.timeout)),o):console.error("QuoJS.ajax: Unable to make jsonp synchronous call.")},e.get=function(t,n,r,i){return e.ajax({url:t,data:n,success:r,dataType:i})},e.post=function(e,t,n,r){return u("POST",e,t,n,r)},e.put=function(e,t,n,r){return u("PUT",e,t,n,r)},e["delete"]=function(e,t,n,r){return u("DELETE",e,t,n,r)},e.json=function(n,r,i){return e.ajax({url:n,data:r,success:i,dataType:t.MIME})},e.serializeParameters=function(e,t){var n,r;t==null&&(t=""),r=t;for(n in e)e.hasOwnProperty(n)&&(r!==t&&(r+="&"),r+=""+encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r===t?"":r},f=function(e,t){e.status>=200&&e.status<300||e.status===0?t.async&&l(s(e,t),e,t):o("QuoJS.ajax: Unsuccesful request",e,t)},l=function(e,t,n){n.success.call(n.context,e,t)},o=function(e,t,n){n.error.call(n.context,e,t,n)},a=function(e,t){var n;t.contentType&&(t.headers["Content-Type"]=t.contentType),t.dataType&&(t.headers.Accept=r[t.dataType]);for(n in t.headers)e.setRequestHeader(n,t.headers[n])},c=function(e,t){e.onreadystatechange={},e.abort(),o("QuoJS.ajax: Timeout exceeded",e,t)},u=function(t,n,r,i,s){return e.ajax({type:t,url:n,data:r,success:i,dataType:s,contentType:"application/x-www-form-urlencoded"})},s=function(e,n){var r,i;i=e.responseText;if(i)if(n.dataType===t.MIME)try{i=JSON.parse(i)}catch(s){r=s,i=r,o("QuoJS.ajax: Parse Error",e,n)}else n.dataType==="xml"&&(i=e.responseXML);return i},i=function(e){return RegExp("=\\?").test(e)}})(Quo)}.call(this),function(){(function(e){var t,n,r,i,s,o,u,a;return t=[],i=Object.prototype,r=/^\s*<(\w+|!)[^>]*>/,s=document.createElement("table"),o=document.createElement("tr"),n={tr:document.createElement("tbody"),tbody:s,thead:s,tfoot:s,td:o,th:o,"*":document.createElement("div")},e.toType=function(e){return i.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},e.isOwnProperty=function(e,t){return i.hasOwnProperty.call(e,t)},e.getDOMObject=function(t,n){var i,s,o;i=null,s=[1,9,11],o=e.toType(t);if(o==="array")i=u(t);else if(o==="string"&&r.test(t))i=e.fragment(t.trim(),RegExp.$1),t=null;else if(o==="string")i=e.query(document,t),n&&(i.length===1?i=e.query(i[0],n):i=e.map(function(){return e.query(i,n)}));else if(s.indexOf(t.nodeType)>=0||t===window)i=[t],t=null;return i},e.map=function(t,n){var r,i,s,o;o=[],r=void 0,i=void 0;if(e.toType(t)==="array"){r=0;while(r<t.length)s=n(t[r],r),s!=null&&o.push(s),r++}else for(i in t)s=n(t[i],i),s!=null&&o.push(s);return a(o)},e.each=function(t,n){var r,i;r=void 0,i=void 0;if(e.toType(t)==="array"){r=0;while(r<t.length){if(n.call(t[r],r,t[r])===!1)return t;r++}}else for(i in t)if(n.call(t[i],i,t[i])===!1)return t;return t},e.mix=function(){var t,n,r,i,s;r={},t=0,i=arguments.length;while(t<i){n=arguments[t];for(s in n)e.isOwnProperty(n,s)&&n[s]!==undefined&&(r[s]=n[s]);t++}return r},e.fragment=function(t,r){var i;return r==null&&(r="*"),r in n||(r="*"),i=n[r],i.innerHTML=""+t,e.each(Array.prototype.slice.call(i.childNodes),function(){return i.removeChild(this)})},e.fn.map=function(t){return e.map(this,function(e,n){return t.call(e,n,e)})},e.fn.instance=function(e){return this.map(function(){return this[e]})},e.fn.filter=function(t){return e([].filter.call(this,function(n){return n.parentNode&&e.query(n.parentNode,t).indexOf(n)>=0}))},e.fn.forEach=t.forEach,e.fn.indexOf=t.indexOf,u=function(e){return e.filter(function(e){return e!==void 0&&e!==null})},a=function(e){return e.length>0?[].concat.apply([],e):e}})(Quo)}.call(this),function(){(function(e){return e.fn.attr=function(t,n){return this.length===0&&null,e.toType(t)==="string"&&n===void 0?this[0].getAttribute(t):this.each(function(){return this.setAttribute(t,n)})},e.fn.removeAttr=function(e){return this.each(function(){return this.removeAttribute(e)})},e.fn.data=function(e,t){return this.attr("data-"+e,t)},e.fn.removeData=function(e){return this.removeAttr("data-"+e)},e.fn.val=function(t){return e.toType(t)==="string"?this.each(function(){return this.value=t}):this.length>0?this[0].value:null},e.fn.show=function(){return this.style("display","block")},e.fn.hide=function(){return this.style("display","none")},e.fn.height=function(){var e;return e=this.offset(),e.height},e.fn.width=function(){var e;return e=this.offset(),e.width},e.fn.offset=function(){var e;return e=this[0].getBoundingClientRect(),{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},e.fn.remove=function(){return this.each(function(){if(this.parentNode!=null)return this.parentNode.removeChild(this)})}})(Quo)}.call(this),function(){(function(e){var t,n,r,i,s,o,u;return r=null,t=/WebKit\/([\d.]+)/,n={Android:/(Android)\s+([\d.]+)/,ipad:/(iPad).*OS\s([\d_]+)/,iphone:/(iPhone\sOS)\s([\d_]+)/,Blackberry:/(BlackBerry|BB10|Playbook).*Version\/([\d.]+)/,FirefoxOS:/(Mozilla).*Mobile[^\/]*\/([\d\.]*)/,webOS:/(webOS|hpwOS)[\s\/]([\d.]+)/},e.isMobile=function(){return r=r||s(),r.isMobile&&r.os.name!=="firefoxOS"},e.environment=function(){return r=r||s(),r},e.isOnline=function(){return navigator.onLine},s=function(){var e,t;return t=navigator.userAgent,e={},e.browser=i(t),e.os=o(t),e.isMobile=!!e.os,e.screen=u(),e},i=function(e){var n;return n=e.match(t),n?n[0]:e},o=function(e){var t,r,i;t=null;for(r in n){i=e.match(n[r]);if(i){t={name:r==="iphone"||r==="ipad"?"ios":r,version:i[2].replace("_",".")};break}}return t},u=function(){return{width:window.innerWidth,height:window.innerHeight}}})(Quo)}.call(this),function(){(function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return t=1,i={},r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touch:"click",doubletap:"dblclick",orientationchange:"resize"},s=/complete|loaded|interactive/,e.fn.on=function(t,n,r){return n==="undefined"||e.toType(n)==="function"?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return n==="undefined"||e.toType(n)==="function"?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.ready=function(t){return s.test(document.readyState)?t(e):e.fn.addEvent(document,"DOMContentLoaded",function(){return t(e)})},e.Event=function(e,t){var n,r;n=document.createEvent("Events"),n.initEvent(e,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null);if(t)for(r in t)n[r]=t[r];return n},e.fn.bind=function(e,t){return this.each(function(){c(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){h(this,e,t)})},e.fn.delegate=function(t,n,r){return this.each(function(i,s){c(s,n,r,t,function(n){return function(r){var i,u;u=e(r.target).closest(t,s).get(0);if(u)return i=e.extend(o(r),{currentTarget:u,liveFired:s}),n.apply(u,[i].concat([].slice.call(arguments,1)))}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){h(this,t,n,e)})},e.fn.trigger=function(t,n,r){return e.toType(t)==="string"&&(t=e.Event(t,n)),r!=null&&(t.originalEvent=r),this.each(function(){this.dispatchEvent(t)})},e.fn.addEvent=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},e.fn.removeEvent=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},c=function(t,n,r,s,o){var f,c,h,p;return n=a(n),h=l(t),c=i[h]||(i[h]=[]),f=o&&o(r,n),p={event:n,callback:r,selector:s,proxy:u(f,r,t),delegate:f,index:c.length},c.push(p),e.fn.addEvent(t,p.event,p.proxy)},h=function(t,n,r,s){var o;return n=a(n),o=l(t),f(o,n,r,s).forEach(function(n){return delete i[o][n.index],e.fn.removeEvent(t,n.event,n.proxy)})},l=function(e){return e._id||(e._id=t++)},a=function(t){var r;return r=e.isMobile()?t:n[t],r||t},u=function(e,t,n){var r;return t=e||t,r=function(e){var r;return r=t.apply(n,[e].concat(e.data)),r===!1&&e.preventDefault(),r},r},f=function(e,t,n,r){return(i[e]||[]).filter(function(e){return e&&(!t||e.event===t)&&(!n||e.callback===n)&&(!r||e.selector===r)})},o=function(t){var n;return n=e.extend({originalEvent:t},t),e.each(r,function(e,r){return n[e]=function(){return this[r]=function(){return!0},t[e].apply(t,arguments)},n[r]=function(){return!1}}),n}})(Quo)}.call(this),function(){(function($$){var CURRENT_TOUCH,EVENT,FIRST_TOUCH,GESTURE,GESTURES,HOLD_DELAY,TAPS,TOUCH_TIMEOUT,_angle,_capturePinch,_captureRotation,_cleanGesture,_distance,_fingersPosition,_getTouches,_hold,_isSwipe,_listenTouches,_onTouchEnd,_onTouchMove,_onTouchStart,_parentIfText,_swipeDirection,_trigger;return TAPS=null,EVENT=void 0,GESTURE={},FIRST_TOUCH=[],CURRENT_TOUCH=[],TOUCH_TIMEOUT=void 0,HOLD_DELAY=650,GESTURES=["touch","tap","singleTap","doubleTap","hold","swipe","swiping","swipeLeft","swipeRight","swipeUp","swipeDown","rotate","rotating","rotateLeft","rotateRight","pinch","pinching","pinchIn","pinchOut","drag","dragLeft","dragRight","dragUp","dragDown"],GESTURES.forEach(function(e){return $$.fn[e]=function(t){var n;return n=e==="touch"?"touchend":e,$$(document.body).delegate(this.selector,n,t)},this}),$$(document).ready(function(){return _listenTouches()}),_listenTouches=function(){var e;return e=$$(document.body),e.bind("touchstart",_onTouchStart),e.bind("touchmove",_onTouchMove),e.bind("touchend",_onTouchEnd),e.bind("touchcancel",_cleanGesture)},_onTouchStart=function(e){var t,n,r,i;EVENT=e,r=Date.now(),t=r-(GESTURE.last||r),TOUCH_TIMEOUT&&clearTimeout(TOUCH_TIMEOUT),i=_getTouches(e),n=i.length,FIRST_TOUCH=_fingersPosition(i,n),GESTURE.el=$$(_parentIfText(i[0].target)),GESTURE.fingers=n,GESTURE.last=r,GESTURE.taps||(GESTURE.taps=0),GESTURE.taps++;if(n===1)return n>=1&&(GESTURE.gap=t>0&&t<=250),setTimeout(_hold,HOLD_DELAY);if(n===2)return GESTURE.initial_angle=parseInt(_angle(FIRST_TOUCH),10),GESTURE.initial_distance=parseInt(_distance(FIRST_TOUCH),10),GESTURE.angle_difference=0,GESTURE.distance_difference=0},_onTouchMove=function(e){var t,n,r;return EVENT=e,GESTURE.el&&(r=_getTouches(e),t=r.length,t===GESTURE.fingers?(CURRENT_TOUCH=_fingersPosition(r,t),n=_isSwipe(e),n&&(GESTURE.prevSwipe=!0),(n||GESTURE.prevSwipe===!0)&&_trigger("swiping"),t===2&&(_captureRotation(),_capturePinch(),e.preventDefault())):_cleanGesture()),!0},_isSwipe=function(e){var t,n,r;return t=!1,CURRENT_TOUCH[0]&&(n=Math.abs(FIRST_TOUCH[0].x-CURRENT_TOUCH[0].x)>30,r=Math.abs(FIRST_TOUCH[0].y-CURRENT_TOUCH[0].y)>30,t=GESTURE.el&&(n||r)),t},_onTouchEnd=function(e){var t,n,r,i,s;return EVENT=e,_trigger("touch"),GESTURE.fingers===1?GESTURE.taps===2&&GESTURE.gap?(_trigger("doubleTap"),_cleanGesture()):_isSwipe()||GESTURE.prevSwipe?(_trigger("swipe"),s=_swipeDirection(FIRST_TOUCH[0].x,CURRENT_TOUCH[0].x,FIRST_TOUCH[0].y,CURRENT_TOUCH[0].y),_trigger("swipe"+s),_cleanGesture()):(_trigger("tap"),GESTURE.taps===1&&(TOUCH_TIMEOUT=setTimeout(function(){return _trigger("singleTap"),_cleanGesture()},100))):(t=!1,GESTURE.angle_difference!==0&&(_trigger("rotate",{angle:GESTURE.angle_difference}),i=GESTURE.angle_difference>0?"rotateRight":"rotateLeft",_trigger(i,{angle:GESTURE.angle_difference}),t=!0),GESTURE.distance_difference!==0&&(_trigger("pinch",{angle:GESTURE.distance_difference}),r=GESTURE.distance_difference>0?"pinchOut":"pinchIn",_trigger(r,{distance:GESTURE.distance_difference}),t=!0),!t&&CURRENT_TOUCH[0]&&(Math.abs(FIRST_TOUCH[0].x-CURRENT_TOUCH[0].x)>10||Math.abs(FIRST_TOUCH[0].y-CURRENT_TOUCH[0].y)>10)&&(_trigger("drag"),n=_swipeDirection(FIRST_TOUCH[0].x,CURRENT_TOUCH[0].x,FIRST_TOUCH[0].y,CURRENT_TOUCH[0].y),_trigger("drag"+n)),_cleanGesture()),EVENT=void 0},_fingersPosition=function(e,t){var n,r;r=[],n=0,e=e[0].targetTouches?e[0].targetTouches:e;while(n<t)r.push({x:e[n].pageX,y:e[n].pageY}),n++;return r},_captureRotation=function(){var angle,diff,i,symbol;angle=parseInt(_angle(CURRENT_TOUCH),10),diff=parseInt(GESTURE.initial_angle-angle,10);if(Math.abs(diff)>20||GESTURE.angle_difference!==0){i=0,symbol=GESTURE.angle_difference<0?"-":"+";while(Math.abs(diff-GESTURE.angle_difference)>90&&i++<10)eval("diff "+symbol+"= 180;");return GESTURE.angle_difference=parseInt(diff,10),_trigger("rotating",{angle:GESTURE.angle_difference})}},_capturePinch=function(){var e,t;t=parseInt(_distance(CURRENT_TOUCH),10),e=GESTURE.initial_distance-t;if(Math.abs(e)>10)return GESTURE.distance_difference=e,_trigger("pinching",{distance:e})},_trigger=function(e,t){if(GESTURE.el)return t=t||{},CURRENT_TOUCH[0]&&(t.iniTouch=GESTURE.fingers>1?FIRST_TOUCH:FIRST_TOUCH[0],t.currentTouch=GESTURE.fingers>1?CURRENT_TOUCH:CURRENT_TOUCH[0]),GESTURE.el.trigger(e,t,EVENT)},_cleanGesture=function(e){return FIRST_TOUCH=[],CURRENT_TOUCH=[],GESTURE={},clearTimeout(TOUCH_TIMEOUT)},_angle=function(e){var t,n,r;return t=e[0],n=e[1],r=Math.atan((n.y-t.y)*-1/(n.x-t.x))*(180/Math.PI),r<0?r+180:r},_distance=function(e){var t,n;return t=e[0],n=e[1],Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))*-1},_getTouches=function(e){return $$.isMobile()?e.touches:[e]},_parentIfText=function(e){return"tagName"in e?e:e.parentNode},_swipeDirection=function(e,t,n,r){var i,s;return i=Math.abs(e-t),s=Math.abs(n-r),i>=s?e-t>0?"Left":"Right":n-r>0?"Up":"Down"},_hold=function(){if(GESTURE.last&&Date.now()-GESTURE.last>=HOLD_DELAY)return _trigger("hold"),GESTURE.taps=0}})(Quo)}.call(this),function(){(function(e){return e.fn.text=function(t){return t||e.toType(t)==="number"?this.each(function(){return this.textContent=t}):this[0].textContent},e.fn.html=function(t){var n;return n=e.toType(t),t||n==="number"||n==="string"?this.each(function(){var e,r,i,s;if(n==="string"||n==="number")return this.innerHTML=t;this.innerHTML=null;if(n==="array"){s=[];for(r=0,i=t.length;r<i;r++)e=t[r],s.push(this.appendChild(e));return s}return this.appendChild(t)}):this[0].innerHTML},e.fn.append=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;return n==="string"?this.insertAdjacentHTML("beforeend",t):n==="array"?t.each(function(t,n){return e.appendChild(n)}):this.appendChild(t)})},e.fn.prepend=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;return n==="string"?this.insertAdjacentHTML("afterbegin",t):n==="array"?t.each(function(t,n){return e.insertBefore(n,e.firstChild)}):this.insertBefore(t,this.firstChild)})},e.fn.replaceWith=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;if(this.parentNode)return n==="string"?this.insertAdjacentHTML("beforeBegin",t):n==="array"?t.each(function(t,n){return e.parentNode.insertBefore(n,e)}):this.parentNode.insertBefore(t,this)}),this.remove()},e.fn.empty=function(){return this.each(function(){return this.innerHTML=null})}})(Quo)}.call(this),function(){(function(e){var t,n,r,i,s,o;return r="parentNode",t=/^\.([\w-]+)$/,n=/^#[\w\d-]+$/,i=/^[\w-]+$/,e.query=function(e,r){var s;return r=r.trim(),t.test(r)?s=e.getElementsByClassName(r.replace(".","")):i.test(r)?s=e.getElementsByTagName(r):n.test(r)&&e===document?(s=e.getElementById(r.replace("#","")),s||(s=[])):s=e.querySelectorAll(r),s.nodeType?[s]:Array.prototype.slice.call(s)},e.fn.find=function(t){var n;return this.length===1?n=Quo.query(this[0],t):n=this.map(function(){return Quo.query(this,t)}),e(n)},e.fn.parent=function(e){var t;return t=e?o(this):this.instance(r),s(t,e)},e.fn.siblings=function(e){var t;return t=this.map(function(e,t){return Array.prototype.slice.call(t.parentNode.children).filter(function(e){return e!==t})}),s(t,e)},e.fn.children=function(e){var t;return t=this.map(function(){return Array.prototype.slice.call(this.children)}),s(t,e)},e.fn.get=function(e){return e===undefined?this:this[e]},e.fn.first=function(){return e(this[0])},e.fn.last=function(){return e(this[this.length-1])},e.fn.closest=function(t,n){var r,i;i=this[0],r=e(t),r.length||(i=null);while(i&&r.indexOf(i)<0)i=i!==n&&i!==document&&i.parentNode;return e(i)},e.fn.each=function(e){return this.forEach(function(t,n){return e.call(t,n,t)}),this},o=function(t){var n;n=[];while(t.length>0)t=e.map(t,function(e){if((e=e.parentNode)&&e!==document&&n.indexOf(e)<0)return n.push(e),e});return n},s=function(t,n){return n===undefined?e(t):e(t).filter(n)}})(Quo)}.call(this),function(){(function(e){var t,n,r;return t=["-webkit-","-moz-","-ms-","-o-",""],e.fn.addClass=function(e){return this.each(function(){if(!r(e,this.className))return this.className+=" "+e,this.className=this.className.trim()})},e.fn.removeClass=function(e){return this.each(function(){if(!e)return this.className="";if(r(e,this.className))return this.className=this.className.replace(e," ").replace(/\s+/g," ").trim()})},e.fn.toggleClass=function(e){return this.each(function(){return r(e,this.className)?this.className=this.className.replace(e," "):(this.className+=" "+e,this.className=this.className.trim())})},e.fn.hasClass=function(e){return r(e,this[0].className)},e.fn.style=function(e,t){return t?this.each(function(){return this.style[e]=t}):this[0].style[e]||n(this[0],e)},e.fn.css=function(e,t){return this.style(e,t)},e.fn.vendor=function(e,n){var r,i,s,o;o=[];for(i=0,s=t.length;i<s;i++)r=t[i],o.push(this.style(""+r+e,n));return o},r=function(e,t){var n;return n=t.split(/\s+/g),n.indexOf(e)>=0},n=function(e,t){return document.defaultView.getComputedStyle(e,"")[t]}})(Quo)}.call(this),function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.infoPanel=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div id="cb-status-left" class="cb-control cb-status-left" data-action="close">\r\n	<div id="cb-info-panel">\r\n		<div class="info-text">None!</div>\r\n	</div>\r\n</div>\r\n'}),t.loadingOverlay=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\r\n<div id="cb-loading-overlay" class="cb-control"></div>\r\n'}),t.navigateLeft=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\r\n<div data-trigger="click" data-action="navigation" data-navigate-side="left" class="cb-control navigate navigate-left ">\r\n	<span class="icon-arrow-left"></span>\r\n</div>\r\n'}),t.navigateRight=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\r\n<div data-trigger="click" data-action="navigation" data-navigate-side="right" class="cb-control navigate navigate-right">\r\n	<span class="icon-arrow-right"></span>\r\n</div>\r\n'}),t.progressbar=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div id="cb-status-right" class="cb-control cb-status-right" data-action="close">\r\n	<div id="cb-progress-bar">\r\n		<div class="progressbar-value"></div>\r\n	</div>\r\n	<div class="progressbar-text">None!</div>\r\n</div>\r\n'}),t.thumbnails=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\n<div class="cb-control thumbnails"></div>\n'}),t.toggleMode=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\r\n<div data-trigger="click" data-action="navigation" data-navigate-side="bottom" class="cb-control navigate navigate-center-bottom">\r\n	<span class="icon-spinner"></span>\r\n</div>\r\n'}),t.toggleToolbar=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\r\n<div data-trigger="click" data-action="navigation" data-navigate-side="center" class="cb-control navigate navigate-center-top">\r\n	<span class="icon-open-toolbar"></span>\r\n</div>\r\n'}),t.toolbar=e(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'\n<div class="toolbar">\n\n	<ul class="pull-left">\n		<li class="close">\n			<button data-trigger="click" data-action="close" title="close" class="icon-remove-sign"></button>\n		</li>\n		<li class="close separator"></li>\n		<li>\n			<button data-trigger="click" data-action="zoomOut" title="Zoom out" class="icon-zoom-out"></button>\n		</li>\n		<li>\n			<button data-trigger="click" data-action="zoomIn" title="Zoom in" class="icon-zoom-in"></button>\n		</li>\n		<li>\n			<button data-trigger="click" data-action="fitWidth" title="Fit page to window width" class="icon-expand"></button>\n		</li>\n		<li>\n			<button data-trigger="click" data-action="originalSize" title="Do not scale image" class="icon-expand-2"></button>\n		</li>\n		<li>\n			<button data-trigger="click" data-action="fitWindow" title="Fit page to window" class="icon-contract"></button>\n		</li>\n		<li>\n			<button data-trigger="click" data-action="toggleReadingMode" title="switch reading direction" class="icon-arrow-right-3 manga-false"></button>\n			<button data-trigger="click" data-action="toggleReadingMode" title="switch reading direction" class="icon-arrow-left-3 manga-true"></button>\n		</li>\n	</ul>\n\n	<ul class="pull-right">\n		<li>\n			<button data-trigger="click" data-action="thumbs" title="Show Thumbnails" class="icon-image"></button>\n		</li>\n		<li><span id="current-page"></span> / <span id="page-count"></span></li>\n	</ul>\n\n</div>\n'})}();var ComicBook=function(e){"use strict";function t(e,t){var n;typeof t=="undefined"&&(t={});for(n in e)if(e.hasOwnProperty(n)){if(n in t)continue;t[n]=e[n]}return t}function r(i,s,o){function x(){var t=window.innerHeight+1;return E===!1&&(E=e(document.createElement("div")).attr("id","cb-width-shiv").css({width:"100%",position:"absolute",top:0,zIndex:"-1000"}),e("body").append(E)),E.height(t),E.innerWidth()}function N(){d=e(document.getElementById(a)),b===!1&&(u.renderControls(),b=!0),window.addEventListener("keydown",u.navigation,!1)}var u=this,a=i;this.srcs=s;var f={zoomMode:"smart",manga:!1,enhance:{},keyboard:{next:39,previous:37,toggleLayout:76,thumbnails:84},libPath:"/comicbook/js/",forward_buffer:3,fileName:null},l=["smart","originalSize","fitWindow"];this.showUi=!1,this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile/i.test(navigator.userAgent)&&(this.isMobile=!0,document.body.classList.add("mobile"),window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)}));var c=t(f,o);console.log("Passed opts =",o),console.log("Overall Options =",c);var h=s.length,p=[],d,v=[],m=[],g=1,y=!1,b=!1,w=!1,E=!1,S=!1,T=0;window.addEventListener("touchstart",function(t){var n=e(t.target);n.attr("id")==="comic"&&u.toggleUIOverlay(),n.data("toggle")==="dropdown"&&n.siblings(".dropdown").toggle()},!1),r.prototype.renderControls=function(){var t={},n;e.each(Handlebars.templates,function(n,r){var i=e(r().trim());t[n]=i,i.find("*").andSelf().filter("[data-action][data-trigger]").each(function(){var t=e(this),n=t.data("trigger"),r=t.data("action");typeof u[t.data("action")]=="function"&&t.on(n,u[r]),t.on(n,function(t){e(u).trigger(n,t)})}),e(d).before(i)}),this.controls=t,n=this.getControl("toolbar"),n.find(".manga-"+c.manga).show().end().find(".manga-"+!c.manga).hide().end().find(".layout").hide().end()},r.prototype.getControl=function(e){if(typeof this.controls[e]!="object")throw n.UNDEFINED_CONTROL+" "+e;return this.controls[e]},r.prototype.showControl=function(e){this.getControl(e).show().addClass("open")},r.prototype.hideControl=function(e){this.getControl(e).removeClass("open").hide()},r.prototype.hideToolBar=function(){this.getControl("toolbar").toggle(!1),e("#cb-status-right").hide(),e("#cb-status-left").hide()},r.prototype.toggleControl=function(e){this.getControl(e).toggle().toggleClass("open")},r.prototype.toggleLayout=function(){var e=u.getControl("toolbar");e.find(".layout").hide().end(),u.drawPage()},r.prototype.getPage=function(e){if(e<0||e>s.length-1)throw n.INVALID_PAGE+" "+e;if(typeof p[e]=="object")return p[e];w=e,this.showControl("loadingOverlay")},r.prototype.draw=function(){N(),e("#cb-loading-overlay").outerWidth(x()).height(window.innerHeight),p.length!==h?this.preload():(this.drawPage(),this.updateInfoPanel())},r.prototype.zoom=function(e){c.zoomMode="manual",g=e,typeof this.getPage(T)=="object"&&this.drawPage()},r.prototype.zoomIn=function(){u.zoom(g+.1)},r.prototype.zoomOut=function(){u.zoom(g-.1)},r.prototype.fitWidth=function(){c.zoomMode="fitWidth",u.drawPage()},r.prototype.originalSize=function(){c.zoomMode="originalSize",u.drawPage()},r.prototype.fitWindow=function(){c.zoomMode="fitWindow",u.drawPage()},r.prototype.thumbs=function(){u.toggleThumbnails()},r.prototype.preload=function(){function i(t){var o=new Image;o.src=s[t],o.onload=function(){p[t]=this,m.push(t),e("#cb-progress-bar .progressbar-value").css("width",Math.floor((m.length-1)/h*100)+"%"),e(".progressbar-text").text("Loaded "+String(m.length-1)+" of "+String(h));if(n===!1&&e.inArray(T,m)!==-1||typeof w=="number"&&e.inArray(w,m)!==-1)typeof w=="number"&&(T=w-1,w=!1),u.drawPage(),u.hideControl("loadingOverlay"),n=!0;r.length?(i(r[0]),r.splice(0,1)):(e("#cb-status-right").delay(500).fadeOut(),e("#cb-status-left").delay(500).fadeOut())}}function o(e,t){var n=0,s=1,o=e,u=e-1;while(o<=t)s>c.forward_buffer&&u>-1?(r.push(u),u--,s=0):(r.push(o),o++),s++;while(u>-1)r.push(u),u--;i(r[n])}var t=T,n=!1,r=[];this.showControl("loadingOverlay"),o(t,s.length-1)},r.prototype.updateInfoPanel=function(){var t="";c.fileName&&(t+="File: "+c.fileName+"<br>"),c.zoomMode==="smart"?t+="Zoom Mode: Smart<br>":c.zoomMode==="originalSize"?t+="Zoom Mode: Original Size<br>":c.zoomMode==="fitWindow"?t+="Zoom Mode: Fit Window<br>":c.zoomMode==="manual"?t+="Zoom Mode: Manual<br>":t+="Zoom Mode: Unknown?<br>";var n=u.getPage(T);n?t+="Image Size: "+n.width+"x"+n.height+"<br>":t+="Images loading!<br>",e(".info-text").html(t)},r.prototype.pageLoaded=function(e){return typeof m[e-1]!="undefined"},r.prototype.drawPage=function(t,r){var i;r=typeof r!="undefined"?r:!0,i=r?0:window.scrollY;if(typeof t=="number"&&t<s.length&&t>0){T=t-1;if(!this.pageLoaded(t)){this.showControl("loadingOverlay");return}}T<0&&(T=0);var o,a=0,f=u.getPage(T),l=!1;if(typeof f!="object")throw n.INVALID_PAGE_TYPE+" "+typeof f;var h=f.width,p=f.height,d,v,m;switch(c.zoomMode){case"manual":document.body.style.overflowX="auto",o=g;break;case"fitWidth":document.body.style.overflowX="hidden",o=x()>h?(x()-h)/x()+1:x()/h,g=o;break;case"originalSize":document.body.style.overflowX="auto",o=1,g=o;break;case"fitWindow":document.body.style.overflowX="hidden",d=x()>h?(x()-h)/x()+1:x()/h,v=window.innerHeight,m=v>p?(v-p)/v+1:v/p,o=d>m?m:d,g=o;break;case"smart":p/h>2.5&&(S=!0),S?(document.body.style.overflowX="auto",o=1,g=o):(document.body.style.overflowX="hidden",d=x()>h?(x()-h)/x()+1:x()/h,v=window.innerHeight,m=v>p?(v-p)/v+1:v/p,o=d>m?m:d,g=o);break;default:throw n.INVALID_ZOOM_MODE+" "+c.zoomMode}var y=f.width*o,b=f.height*o,w=c.zoomMode==="manual"?f.width*g:y,E=c.zoomMode==="manual"?f.height*g:b;b=E,y<x()&&(a=(x()-w)/2),this.drawImageToCanvasArray(f,a,w,E);var N=T+1;this.getControl("toolbar").find("#current-page").text(N).end().find("#page-count").text(s.length),e("button.cb-fit-width").attr("disabled",c.zoomMode==="fitWidth"),e("button.cb-fit-window").attr("disabled",c.zoomMode==="fitWindow"),e(".navigate").show(),T===0&&(c.manga?(e(".navigate-left").show(),e(".navigate-right").hide()):(e(".navigate-left").hide(),e(".navigate-right").show()));if(T===s.length-1||typeof l=="object"&&T===s.length-2)c.manga?(e(".navigate-left").hide(),e(".navigate-right").show()):(e(".navigate-left").show(),e(".navigate-right").hide());this.updateInfoPanel()},r.prototype.drawImageToCanvasArray=function(t,n,r,i){var s=1500,o=i,u=0,a=0;while(v.length)v.pop().remove();d.children().each(function(){e(this).remove()});var f=window.devicePixelRatio||1;console.log("Pixel ratio",f);for(var l=0;l*s<i;l+=1){var c=e("<canvas/>");d.append(c),d.append(e("<br/>")),v.push(c);var h=c[0];r>x()?(h.style.width=r+"px",h.width=r*f):(h.style.width=x()+"px",h.width=x()*f),o>s?(h.style.height=s+"px",h.height=s*f,a=s,u+=s,o-=s):
(h.style.height=o+"px",h.height=o*f,a=o,u+=o,o-=o);var p=h.getContext("2d"),m=n,g=(a-u)*f,y=r*f,b=i*f;p.drawImage(t,m,g,y,b)}},r.prototype.drawNextPage=function(){var e;try{e=u.getPage(T+1)}catch(t){}if(!e)return!1;if(T+1<p.length){T+=1;try{u.drawPage()}catch(t){}}window.scroll(0,0)},r.prototype.drawPrevPage=function(){var e;try{e=u.getPage(T-1)}catch(t){}if(!e)return!1;y=e.width>e.height,T>0&&(T-=1,u.drawPage()),window.scroll(0,0)},r.prototype.navigation=function(t){if(e("#cb-loading-overlay").is(":visible"))return!1;var r=!1;switch(t.type){case"click":r=t.currentTarget.getAttribute("data-navigate-side");break;case"keydown":t.keyCode===c.keyboard.previous&&(r="left"),t.keyCode===c.keyboard.next&&(r="right"),t.keyCode===c.keyboard.toolbar&&u.toggleUIOverlay(),t.keyCode===c.keyboard.toggleLayout&&u.toggleLayout(),t.keyCode===c.keyboard.thumbnails&&u.toggleThumbnails();break;default:throw n.INVALID_NAVIGATION_EVENT+" "+t.type}if(r){t.preventDefault(),t.stopPropagation();if(r==="center")console.log("Center clicked? Toggling toolbar"),u.toggleUIOverlay();else if(r==="bottom"){var i=l.indexOf(c.zoomMode);i=(i+1)%l.length,c.zoomMode=l[i],console.log("Zoom Mode!",c.zoomMode),u.drawPage(),e("#cb-status-left").show().delay(1e3).fadeOut()}else console.log("Page change event!"),c.manga?(r==="left"&&u.drawNextPage(),r==="right"&&u.drawPrevPage()):(r==="left"&&u.drawPrevPage(),r==="right"&&u.drawNextPage()),u.hideToolBar();return u.updateInfoPanel(),!1}},r.prototype.toggleReadingMode=function(){c.manga=!c.manga,u.getControl("toolbar").find(".manga-"+c.manga).show().end().find(".manga-"+!c.manga).hide(),u.drawPage()},r.prototype.toggleThumbnails=function(){var t=u.getControl("thumbnails");t.html(""),u.toggleControl("thumbnails"),e.each(p,function(n,r){var i=e(r).clone(),s=e("<a>").attr("href","#"+n).append(i);s.on("click",function(){u.hideControl("thumbnails")}),t.append(s)})},r.prototype.toggleUIOverlay=function(){u.toggleControl("toolbar");var t=u.getControl("toolbar");t.is(":visible")?(e("#cb-status-right").show(),e("#cb-status-left").show()):(e("#cb-status-right").hide(),e("#cb-status-left").hide())},r.prototype.destroy=function(){e.each(this.controls,function(e,t){t.remove()}),e.each(v,function(e,t){t.width=0,t.height=0}),window.removeEventListener("keydown",this.navigation,!1)}}var n={INVALID_ACTION:"invalid action",INVALID_PAGE:"invalid page",INVALID_PAGE_TYPE:"invalid page type",UNDEFINED_CONTROL:"undefined control",INVALID_ZOOM_MODE:"invalid zoom mode",INVALID_NAVIGATION_EVENT:"invalid navigation event"};return r}(jQuery);